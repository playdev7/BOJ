# https://solved.ac/profile/playdev7
# 2023 KAIST RUN Spring Open Contest
# C번 - Monochrome Tree

# 해설 - 흑적트리 흑백판
# 루트노드는 1이지만, 정렬되지 않은 정점 집합을 갖고 있는데 다음과 같다.
    # u와 v 모두 블랙이 칠해질 수 있다.
    # u는 v의 부모노드 일 수 있고, v도 u의 부모노드일 수 있다.

# 0부터 k 까지의 임의의 수 k가 주어진다.
# k 라는 수가 주어지면, k와 n-k 를 비교하여 더 작은 수에 블랙을 칠하라. c_k 라고 칭한다

# 입력 - 첫 줄에는 n이 주어진다. n은 모든 정점의 개수와 같다.
# n-1 개의 만큼의 행 동안 트리의 구조가 입력된다. i라고도 칭한다.
# i는 i번 행을 의미하고, i+1번 행에 대한 차수를 의미한다.

# 출력 - 한 줄에, n+1 개의 정수로 i번째 행에 무엇이 들었는지 표시하라.

# 풀이
# K는 주어지지 않는다.

n = int(input())

tree = [int(input()) for _ in range(n-1)]
tree.insert(0, 0)
tree.insert(0, 0)

color = 1
        

# 0행과 1행은 부모정보가 없어서 0이다.
# 1행의 자식이 2개라면 2행은 최소 2개를 칠한다.
# 2행의 자식이 3개라면 3행은 최소 6개를 칠한다.